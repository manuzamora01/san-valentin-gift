<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para ti ‚ù§Ô∏è</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;600&display=swap');

        :root {
            --primary: #ff4d6d;
            --secondary: #590d22;
            --bg: #fff0f3;
            --card-bg: rgba(255, 255, 255, 0.95);
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg);
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* --- FONDO ANIMADO DE CORAZONES --- */
        .bg-hearts {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; overflow: hidden; pointer-events: none;
        }
        .bg-heart {
            position: absolute; color: rgba(255, 77, 109, 0.2);
            font-size: 2rem; animation: floatUp 10s linear infinite;
        }

        /* --- PANTALLA DE BIENVENIDA --- */
        #welcome-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            transition: opacity 0.8s ease;
        }

        .heart-btn {
            background: white;
            color: var(--primary);
            width: 120px; height: 120px;
            border-radius: 50%; border: none;
            font-size: 3rem;
            box-shadow: 0 0 20px rgba(255, 77, 109, 0.6);
            cursor: pointer;
            animation: pulse 1.5s infinite;
            display: flex; align-items: center; justify-content: center;
            margin-top: 30px;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- CONFETI --- */
        .confetti {
            position: fixed; width: 10px; height: 10px;
            background-color: var(--primary);
            animation: fall linear forwards; z-index: 3000;
        }

        /* --- CONTENIDO PRINCIPAL --- */
        #main-content {
            display: none;
            width: 100%; max-width: 450px;
            padding: 20px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1s ease;
            padding-bottom: 80px;
        }

        h1 {
            font-family: 'Dancing Script', cursive;
            color: var(--secondary);
            font-size: 2.5rem;
            text-align: center;
            margin: 10px 0;
        }

        /* --- CONTADOR --- */
        .timer-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
            background: white; padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin: 20px 0; text-align: center;
        }
        .time-box { display: flex; flex-direction: column; }
        .time-val { font-size: 1.2rem; font-weight: bold; color: var(--primary); }
        .time-label { font-size: 0.7rem; color: #888; text-transform: uppercase; }

        /* --- GALER√çA --- */
        .gallery-wrapper {
            position: relative; width: 100%;
            border-radius: 20px; overflow: hidden;
            background: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            aspect-ratio: 4/5;
            touch-action: pan-y;
        }
        .slide {
            position: absolute; width: 100%; height: 100%;
            opacity: 0; transition: opacity 0.5s ease-in-out;
            display: flex; align-items: center; justify-content: center;
            background: #000;
        }
        .slide.active { opacity: 1; }
        .slide img { width: 100%; height: 100%; object-fit: cover; }

        .nav-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            background: rgba(255,255,255,0.3);
            border: none; color: white;
            font-size: 2rem; padding: 15px;
            cursor: pointer; z-index: 10;
            backdrop-filter: blur(2px); border-radius: 50%;
            width: 50px; height: 50px;
            display: flex; align-items: center; justify-content: center;
        }
        .prev { left: 10px; }
        .next { right: 10px; }

        /* --- SISTEMA DE CARTA OCULTA (MODIFICADO) --- */
        #letter-modal {
            display: none; 
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            
            /* CAMBIO REALIZADO: Fondo transparente con desenfoque */
            background: rgba(0, 0, 0, 0.2); /* Un tinte negro muy suave (20%) */
            backdrop-filter: blur(8px); /* Efecto cristal */
            -webkit-backdrop-filter: blur(8px); /* Para Safari */
            
            z-index: 3000;
            align-items: center; justify-content: center;
        }

        /* El Sobre */
        .envelope-container {
            cursor: pointer;
            text-align: center;
            animation: float 3s ease-in-out infinite;
        }
        .envelope-icon {
            font-size: 6rem;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
        }
        .tap-hint {
            color: white; font-size: 1.2rem; margin-top: 10px;
            font-family: 'Dancing Script', cursive;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3); /* Sombra para que se lea bien sobre el blur */
        }

        /* La Carta Abierta */
        .letter-paper {
            display: none;
            background: #fffdf0;
            width: 90%; max-width: 400px;
            padding: 30px;
            border-radius: 5px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            font-family: 'Dancing Script', cursive;
            font-size: 1.3rem;
            line-height: 1.6;
            color: #4a4a4a;
            position: relative;
            transform: scale(0.8);
            transition: transform 0.3s ease;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close-btn {
            position: absolute; top: 10px; right: 15px;
            font-size: 1.5rem; color: #aaa;
            cursor: pointer; font-family: sans-serif;
        }

        /* --- ANIMACIONES --- */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }
        @keyframes floatUp {
            0% { transform: translateY(100vh) scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
        }
    </style>
</head>
<body>

    <div class="bg-hearts" id="hearts-container"></div>

    <audio id="music" loop>
        <source src="musica.mp3" type="audio/mpeg">
    </audio>

    <div id="welcome-screen">
        <h1 style="color: #fff; text-shadow: 1px 1px 5px rgba(0,0,0,0.2);">¬°Hola amor!</h1>
        <p style="color: #fff;">Tengo algo especial para ti</p>
        <button class="heart-btn" onclick="startGift()">‚ù§Ô∏è</button>
        <p style="color: white; font-size: 0.8rem; margin-top: 20px;">(Sube el volumen)</p>
    </div>

    <div id="main-content">
        <h1>Juntos desde...</h1>
        
        <div class="timer-container">
            <div class="time-box"><span class="time-val" id="days">0</span><span class="time-label">D√≠as</span></div>
            <div class="time-box"><span class="time-val" id="hours">0</span><span class="time-label">Horas</span></div>
            <div class="time-box"><span class="time-val" id="minutes">0</span><span class="time-label">Min</span></div>
            <div class="time-box"><span class="time-val" id="seconds">0</span><span class="time-label">Seg</span></div>
        </div>

        <p style="text-align: center; font-size: 0.9rem; color: #666; margin-bottom: 20px;">Cada momento cuenta ‚ù§Ô∏è</p>

        <div class="gallery-wrapper" id="gallery">
            <div class="slide active"><img src="foto1.jpg" alt="Foto 1"></div>
            <div class="slide"><img src="foto2.jpg" alt="Foto 2"></div>
            <div class="slide"><img src="foto3.jpg" alt="Foto 3"></div>
            <div class="slide"><img src="foto4.jpg" alt="Foto 4"></div>
            <div class="slide"><img src="foto5.jpg" alt="Foto 5"></div>
            <div class="slide"><img src="foto7.jpg" alt="Foto 7"></div>
            
            <button class="nav-btn prev" onclick="moveSlide(-1)">&#10094;</button>
            <button class="nav-btn next" onclick="moveSlide(1)">&#10095;</button>
        </div>
        <p style="text-align: center; font-size: 0.8rem; color: #999; margin-top: 5px;">(Desliza hasta el final...)</p>

        <div style="text-align: center; margin-top: 20px;">
            <button onclick="showReason()" style="background: var(--primary); color: white; border:none; padding: 10px 20px; border-radius: 20px;">¬øPor qu√© te quiero?</button>
            <div id="reason-display" style="margin-top: 10px; font-style: italic; color: var(--secondary); min-height: 20px;"></div>
        </div>
    </div>

    <div id="letter-modal">
        <div class="envelope-container" id="envelope" onclick="openLetter()">
            <div class="envelope-icon">üíå</div>
            <div class="tap-hint">¬°Tienes una carta! Toque para abrir</div>
        </div>
        
        <div class="letter-paper" id="letter-content">
            <span class="close-btn" onclick="closeLetter()">&times;</span>
            
            <h2>Mi Amor,</h2>
            <p>Si est√°s leyendo esto, es porque has recorrido todos nuestros recuerdos.</p>
            <p>Quer√≠a hacer algo diferente, algo creado por m√≠, para decirte que eres lo m√°s importante en mi.</p>
            <p>Gracias por cada risa, cada abrazo y cada momento.</p>
            <p>Gracias por tu paciencia y tu comprensi√≥n.</p>
            <p>Gracias por tus besos y tus caricias.</p>
            <p>Gracias por cada momento d√≥nde me haces <br> sonre√≠r solo con verte</p>
            <p>Gracias por entenderme y siempre estar de mi lado.</p>
            <p>Eres lo mejor que me ha pasado y la mujer <br> con la que quiero estar toda la vida</p>
            <p>Te kero hasta la Luna y vuelta a paso de piedra.</p>
            <p style="text-align: right; margin-top: 20px;"><strong>Mau</strong></p>
        </div>
    </div>

    <script>
        // --- CONFIGURACI√ìN ---
        const startDate = new Date(2022, 9, 2, 19, 0, 0); 
        
        const reasons = [
            "Porque me haces re√≠r", "Por tu paciencia", "Por tus ojos", 
            "Porque eres mi hogar", "Porque me inspiras", "Porque me haces re√≠r incluso cuando no tengo ganas",
            "Porque contigo los silencios no son inc√≥modos", "Porque sacas la mejor versi√≥n de m√≠ mismo",
            "Porque cualquier plan, por simple que sea, es mejor si es contigo.", "Por la forma en que me das la mano al caminar",
            "Por el olor de tu perfume que se queda en mi ropa", "Porque me encanta tu sonrisa, es mi paisaje favorito" 
        ];

        // --- L√ìGICA ---
        function startGift() {
            document.getElementById('music').play().catch(e => console.log("Audio error: ", e));
            createConfetti(); // Activamos confeti
            const welcome = document.getElementById('welcome-screen');
            const main = document.getElementById('main-content');
            welcome.style.opacity = '0';
            setTimeout(() => {
                welcome.style.display = 'none';
                main.style.display = 'block';
                setTimeout(() => main.style.opacity = '1', 50);
            }, 800);
        }

        function updateTimer() {
            const now = new Date();
            const diff = now - startDate;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / (1000 * 60)) % 60);
            const seconds = Math.floor((diff / 1000) % 60);
            document.getElementById('days').innerText = days;
            document.getElementById('hours').innerText = hours;
            document.getElementById('minutes').innerText = minutes;
            document.getElementById('seconds').innerText = seconds;
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        // --- GALER√çA ---
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');

        function moveSlide(n) {
            // DETECCI√ìN DE CARTA
            if (currentSlide === slides.length - 1 && n === 1) {
                showEnvelope();
                return;
            }

            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + n + slides.length) % slides.length;
            slides[currentSlide].classList.add('active');
        }

        // Swipe Logic
        const gallery = document.getElementById('gallery');
        let touchStartX = 0;
        let touchEndX = 0;

        gallery.addEventListener('touchstart', e => touchStartX = e.changedTouches[0].screenX);
        gallery.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            if (touchStartX - touchEndX > 50) moveSlide(1); 
            if (touchEndX - touchStartX > 50) moveSlide(-1); 
        });

        // --- SISTEMA DE CARTA ---
        function showEnvelope() {
            const modal = document.getElementById('letter-modal');
            modal.style.display = 'flex';
        }

        function openLetter() {
            document.getElementById('envelope').style.display = 'none';
            const letter = document.getElementById('letter-content');
            letter.style.display = 'block';
            setTimeout(() => {
                letter.style.transform = 'scale(1)';
            }, 10);
        }

        function closeLetter() {
            document.getElementById('letter-modal').style.display = 'none';
            document.getElementById('envelope').style.display = 'block';
            document.getElementById('letter-content').style.display = 'none';
            document.getElementById('letter-content').style.transform = 'scale(0.8)';
        }

        function showReason() {
            const display = document.getElementById('reason-display');
            display.innerText = reasons[Math.floor(Math.random() * reasons.length)];
        }

        // --- CONFETI Y EXTRAS ---
        function createConfetti() {
            const colors = ['#ff4d6d', '#ffb3c1', '#ffffff'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = Math.random() * 2 + 3 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 4000);
            }
        }
        
        // Corazones Fondo
        const heartsContainer = document.getElementById('hearts-container');
        for (let i = 0; i < 20; i++) {
            const heart = document.createElement('div');
            heart.classList.add('bg-heart');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = Math.random() * 10 + 5 + 's';
            heart.style.animationDelay = Math.random() * 5 + 's';
            heartsContainer.appendChild(heart);
        }
    </script>
</body>
</html>
